<!doctype html>
<html lang="vi">

<head th:replace="~{fragments/header :: header}"></head>

<body>
	<nav th:replace="~{fragments/topmenu :: topmenu}"></nav>

	<main role="main" class="container-fluid" style="margin-top: 56px;">
		<!-- Tabs -->
		<ul class="nav nav-tabs mb-3" id="pickingTabs" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="chooseorder-tab" data-toggle="tab" href="#chooseorder" role="tab"
					aria-controls="chooseorder" aria-selected="true">
					üßæ Danh s√°ch order c·∫ßn nh·∫≠n h√†ng!
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="scan-tab" data-toggle="tab" href="#scan" role="tab" aria-controls="scan"
					aria-selected="false">
					üì¶ Qu√©t & Nh·∫≠n h√†ng
				</a>
			</li>

			<li class="nav-item d-none" th:if="${receivingComplete}">
				<a class="nav-link" id="finish-tab" data-toggle="tab" href="#finish" role="tab" aria-controls="finish"
					aria-selected="false">
					‚úÖ K·∫øt th√∫c nh·∫≠n h√†ng
				</a>
			</li>
		</ul>

		<!-- Tab n·ªôi dung -->
		<div class="tab-content" id="pickingTabContent">
			<!-- Tab 1: Danh s√°ch order c·∫ßn nh·∫≠n h√†ng -->
			<div class="tab-pane fade show active" id="chooseorder" role="tabpanel" aria-labelledby="chooseorder-tab">
				<div class="card">
					<div class="card-body">
						<h5 class="card-title">üìå Ch·ªçn order ƒë·ªÉ nh·∫≠n h√†ng</h5>
						<div class="row">
							<div th:replace="~{fragments/orderreceiving/receiving_order_list :: receiving_order_list}">
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Tab 2: Qu√©t c√°c item ƒë·ªÉ nh·∫≠n h√†ng -->
			<div class="tab-pane fade" id="scan" role="tabpanel" aria-labelledby="scan-tab">
				<div th:if="${order != null and order.status == 3}">
					<div class="mt-3"
						th:replace="~{fragments/orderreceiving/receiving_scan_list :: receiving_scan_list}">
					</div>
				</div>
				
				<div th:if="${order == null or order.status != 3}">
					<p>Ch∆∞a ch·ªçn order ƒë·ªÉ nh·∫≠n h√†ng!</p>
				</div>
			</div>
			
			
			<!-- Tab 3: K·∫øt th√∫c nh·∫≠n h√†ng -->
			<div class="tab-pane fade d-none" id="finish" role="tabpanel" aria-labelledby="finish-tab" th:if="${receivingComplete}">
				<div th:if="${order == null or order.status != 3}">
					<p>Ch∆∞a ch·ªçn order ƒë·ªÉ k·∫øt th√∫c nh·∫≠n h√†ng!</p>
				</div>
			   <!-- Panel k·∫øt th√∫c nh·∫≠n h√†ng -->
			   <div th:if="${order != null and order.status == 3}" class="card mt-3 border-success">
			     <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
			       <span><i class="fas fa-flag-checkered mr-2"></i> K·∫øt th√∫c nh·∫≠n h√†ng</span>
			       <button class="btn btn-light btn-sm" onclick="endReceiving()">
			         <i class="fas fa-check-double mr-1"></i> X√°c nh·∫≠n k·∫øt th√∫c
			       </button>
			     </div>
			     <div class="card-body">
			       <p class="mb-2">Vui l√≤ng ch·∫Øc ch·∫Øn r·∫±ng t·∫•t c·∫£ c√°c m√£ Serial ƒë√£ ƒë∆∞·ª£c qu√©t ƒë·∫ßy ƒë·ªß tr∆∞·ªõc khi k·∫øt th√∫c nh·∫≠n h√†ng.</p>
			       <ul class="mb-0 text-muted">
			         <li>To√†n b·ªô d·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c l∆∞u c·ªë ƒë·ªãnh.</li>
			         <li>Kh√¥ng th·ªÉ ch·ªânh s·ª≠a sau khi k·∫øt th√∫c.</li>
			       </ul>
			     </div>
			   </div>
			   <div id="receiving-complete-message" class="text-left mt-2" style="display: none;"></div>
			 </div>
		</div> <!-- end tab-content -->

	</main>

	<!-- Scripts -->
	<script src="/bootstrap-4.6.2/js/jquery-3.5.1.min.js"></script>
	<script src="/bootstrap-4.6.2/js/bootstrap.bundle.min.js"></script>
	<script src="/dataTables/jquery.dataTables.min.js"></script>
	<script src="/js/picking_instruction.js?v=2"></script>
	<!-- G√°n bi·∫øn tr∆∞·ªõc -->
	<script th:inline="javascript">
	  let selectedOrderId = /*[[${order != null} ? ${order.id} : 0]]*/ 0;
	</script>
	
	<script src="/js/receiving.js?v=2"></script>
	<script src="/js/receiving-scan-serial.js?v=2"></script>
</body>

</html>